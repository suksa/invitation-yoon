var startEffect = function() {
	
	if ($("#area1 #lottieBox").length == 0) {
		$.getScript('https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js', function () {

			$("#area1").prepend('<div id="lottieBox" class="lottie_box"></div>');

			setTimeout(() => {
				flowerstart();
			}, 1000);

			const width = window.innerWidth,
				height = window.innerHeight+1000,
				flowerCont = document.getElementById("lottieBox"),
				flowerSizes = ["1", "2", "3","4", "5"],
				flowerTypes = ["snow snow"],
				flowerPiece = 14;

			function flowerstart(){
				for(let i=0; i<flowerPiece; i++){
					let flowerPieceSpan = document.createElement("span");
					let flowerSizeIndex = Math.ceil(Math.random() * flowerSizes.length) -1;
					let flowerSize = flowerSizes[flowerSizeIndex];
					let flowerTypeIndex = Math.ceil(Math.random() * flowerTypes.length) -1;
					let flowerType = flowerTypes[flowerTypeIndex];
			
					gsap.set(flowerPieceSpan, {attr: {class: flowerType + flowerSize}, x: range(-100, width), y: range(0, -200) })
					
					flowerCont.appendChild(flowerPieceSpan);
					flowering(flowerPieceSpan);
				}
			}
			
			// 범위 설정하기 
			function range(min, max) {
				return min + Math.random() * (max - min)
			};
			
			//애니메이션 설정하기
			function flowering(elem){
				gsap.to(elem, {duration: range(15, 20), y: height, ease: "none", repeat:-1, delay: -1000});
				gsap.to(elem, {duration: range(2, 14), x: '+=100', repeat: -1, yoyo: true, ease: Sine.easeInOut});
				gsap.to(elem, {duration: range(2, 8), rotation: range(0, 0), repeat: -1, yoyo: true, ease:Sine.easeInOut, delay: -1000});
			}
		});
	}

	
}



$(document).ready(function () {
	startEffect();
});